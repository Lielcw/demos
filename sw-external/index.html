<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Index | Service Worker: Handle external resources</title>

	<!-- Load Google font -->
	<link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet" type="text/css">
	<!-- Load our styles -->
	<link href="styles.css" rel="stylesheet" type="text/css">

</head>
<body>
	<h1>Fancy headline</h1>
	<!-- external img served over https without CORS and cached via service worker -->
	<img src="https://justmarkup.com/azores/img/sao-miguel/big/12.jpg" alt="">

	<!-- external img served over https without CORS and not cached via service worker -->
	<img src="https://justmarkup.com/azores/img/sao-miguel/big/2.jpg" alt="">
	
	<script>
		// check if Service Worker is available
		if ('serviceWorker' in navigator) {
			// Register Service Worker
			navigator.serviceWorker.register('service-worker.js');

			if (!navigator.serviceWorker.controller) {
				console.log("sw client: This page is not controlled by a ServiceWorker");
			}
			else {
				console.log("sw client: This page is controlled by a ServiceWorker");
			}


			// append external img served over https without CORS
			var externalImg = document.createElement('img');
			externalImg.src = 'https://justmarkup.com/azores/img/sao-miguel/big/3.jpg';
			document.body.appendChild(externalImg);

			(function(){
				var externalScript = document.createElement('script');
				externalScript.type = 'text/javascript';
				externalScript.async = true;
				externalScript.src = 'https://justmarkup.com/sw-external-script.js';
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(externalScript, s);
			})();

		}
	</script>
</body>
</html>
